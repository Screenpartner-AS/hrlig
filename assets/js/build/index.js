(()=>{"use strict";var e={338:(e,t,n)=>{var r=n(795);t.H=r.createRoot,r.hydrateRoot},795:e=>{e.exports=window.ReactDOM}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};n.r(r),n.d(r,{hasBrowserEnv:()=>_e,hasStandardBrowserEnv:()=>Se,hasStandardBrowserWebWorkerEnv:()=>Ne,navigator:()=>Re,origin:()=>ke});const s=window.React;var a=n(338);const o={sidebar:"eyeRUPqX",sidebarOpen:"jlzd8w2l",header:"uz6R0FRB",heading:"JmCn3rEF",loading:"n_qzFVJi",error:"Al9YmQdH",sidebarToggle:"Adyp4PKK",caseList:"bO43PUGK",caseItem:"VmHJTL8T",active:"fs9572h4",caseStatus:"CF0igzd3",caseTitle:"dvjmpRyW",assignedUser:"VgmJIeRg",avatar:"Jh5xZVXa",avatarPlaceholder:"Qq0VuQBa",userName:"Pj2cG366",filterSelect:"Qp1_pXwh",statusDot:"em3RTAiy",statusNew:"_C2Eq8bI",statusOngoing:"nxfLiwUJ",statusClosed:"NpbEMKs_"},i=window.wp.i18n,l=({user:e,size:t=20,showName:n=!0})=>(0,s.createElement)("div",{className:o.assignedUser,style:{gap:6}},(0,s.createElement)("div",{className:o.avatar,style:{width:t,height:t}},e.avatar?(0,s.createElement)("img",{src:e.avatar,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,s.createElement)("div",{className:o.avatarPlaceholder},e.name?e.name.charAt(0).toUpperCase():"?")),n&&(0,s.createElement)("span",{className:o.userName},e.name||(0,i.__)("Unassigned","hr-support-chat"))),c=({selectedCaseId:e,onSelectCase:t,cases:n,refreshCases:r,loading:a,error:c,sidebarOpen:u=!1,onCloseSidebar:d,isHR:m})=>{const[p,h]=(0,s.useState)("All"),f=(0,s.useRef)(null),g=(0,s.useRef)(null),E=(0,s.useMemo)((()=>"All"===p?n:n.filter((e=>e.status===p))),[n,p]),y=(0,i.__)("HR Chat","hr-support-chat");return(0,s.useLayoutEffect)((()=>{if(!e||!g.current||!f.current)return;const t=f.current,n=g.current,r=t.getBoundingClientRect(),s=n.getBoundingClientRect();(s.top<r.top||s.bottom>r.bottom)&&n.scrollIntoView({behavior:"smooth",block:"center"})}),[E,e]),(0,s.createElement)("aside",{className:o.sidebar+(u?" "+o.sidebarOpen:""),ref:f},(0,s.createElement)("div",{className:o.header},"function"==typeof d&&(0,s.createElement)("button",{onClick:d,className:o.sidebarToggle+" visible-mobile","aria-label":"Close sidebar"},(0,s.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 8C3 7.44772 3.44772 7 4 7H20C20.5523 7 21 7.44772 21 8C21 8.55228 20.5523 9 20 9H4C3.44772 9 3 8.55228 3 8ZM3 16C3 15.4477 3.44772 15 4 15H14C14.5523 15 15 15.4477 15 16C15 16.5523 14.5523 17 14 17H4C3.44772 17 3 16.5523 3 16Z",fill:"currentColor"}))),(0,s.createElement)("h2",{className:o.heading},(0,i.__)("Support Cases","hr-support-chat"))),(0,s.createElement)("div",{className:o.filterWrapper},(0,s.createElement)("select",{id:"statusFilter",value:p,onChange:e=>h(e.target.value),className:o.filterSelect},(0,s.createElement)("option",{value:"All"},(0,i.__)("All","hr-support-chat")),(0,s.createElement)("option",{value:"New"},(0,i.__)("New","hr-support-chat")),(0,s.createElement)("option",{value:"Ongoing"},(0,i.__)("Ongoing","hr-support-chat")),(0,s.createElement)("option",{value:"Closed"},(0,i.__)("Closed","hr-support-chat")))),c&&(0,s.createElement)("p",{className:o.error},c),!n.length&&a?(0,s.createElement)("p",{className:o.loading},(0,i.__)("Loadingâ€¦","hr-support-chat")):(0,s.createElement)("ul",{className:o.caseList},E.map((n=>{const r=n.id===e,a=m?n.title||(0,i.__)("Untitled Case","hr-support-chat"):y;return(0,s.createElement)("li",{key:n.id,ref:r?g:null,onClick:()=>t(n.id),className:`${o.caseItem} ${r?o.active:""}`},(0,s.createElement)("div",{className:o.caseContent},(0,s.createElement)("div",{className:o.caseTitle},a),(0,s.createElement)("div",{className:o.caseStatus},(0,s.createElement)("span",{className:`${o.statusDot} ${o["status"+n.status]}`})),(0,s.createElement)(l,{user:n.assigned_to||{name:null,avatar:null},size:20,showName:!0})))}))))},u=(0,s.createContext)(),d="hrsc-session",m=({children:e})=>{const[t,n]=(0,s.useState)(null),[r,a]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{const e=localStorage.getItem(d);window.hrscChatVars?.nonce?(async()=>{try{const e=await fetch("/wp-json/hrsc/v1/session",{headers:{"X-WP-Nonce":window.hrscChatVars?.nonce||""}}),t=await e.json();t?.roles?.length&&n({email:t.email,firstName:t.firstName,roles:t.roles})}catch(e){console.error("âŒ Failed to fetch WP session",e)}finally{a(!0)}})():(()=>{if(e)try{const t=JSON.parse(e);return n(t),a(!0),!0}catch(e){console.error("Failed to parse saved session",e)}return!1})()||a(!0)}),[]),(0,s.useEffect)((()=>{t&&(!t.roles||0===t.roles.length)&&localStorage.setItem(d,JSON.stringify(t))}),[t]),(0,s.createElement)(u.Provider,{value:{session:t,updateSession:e=>{n((t=>({...t,...e})))},ready:r}},e)},p=u;async function h(e,t="GET",n=null,r={}){const s=window.hrscChatVars?.restUrl||"/wp-json/hrsc/v1",a=new URL(`${s}${e}`);"GET"===t&&r&&"object"==typeof r&&Object.entries(r).forEach((([e,t])=>{null!=t&&a.searchParams.append(e,t)}));const o={"Content-Type":"application/json"};window.hrscChatVars?.nonce&&(o["X-WP-Nonce"]=window.hrscChatVars.nonce);const i=await fetch(a.toString(),{method:t,headers:o,body:n&&"GET"!==t?JSON.stringify(n):null,credentials:"include"});let l;try{l=await i.json()}catch(e){throw new Error("Invalid server response.")}if(!i.ok)throw new Error(l.message||"Request failed");return l}function f(e,t){return function(){return e.apply(t,arguments)}}const{toString:g}=Object.prototype,{getPrototypeOf:E}=Object,{iterator:y,toStringTag:w}=Symbol,b=(v=Object.create(null),e=>{const t=g.call(e);return v[t]||(v[t]=t.slice(8,-1).toLowerCase())});var v;const C=e=>(e=e.toLowerCase(),t=>b(t)===e),_=e=>t=>typeof t===e,{isArray:R}=Array,S=_("undefined"),N=C("ArrayBuffer"),k=_("string"),O=_("function"),T=_("number"),x=e=>null!==e&&"object"==typeof e,A=e=>{if("object"!==b(e))return!1;const t=E(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||w in e||y in e)},j=C("Date"),L=C("File"),B=C("Blob"),U=C("FileList"),P=C("URLSearchParams"),[F,D,M,H]=["ReadableStream","Request","Response","Headers"].map(C);function I(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,s;if("object"!=typeof e&&(e=[e]),R(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),a=s.length;let o;for(r=0;r<a;r++)o=s[r],t.call(null,e[o],o,e)}}function $(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,s=n.length;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const q="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,z=e=>!S(e)&&e!==q,V=(W="undefined"!=typeof Uint8Array&&E(Uint8Array),e=>W&&e instanceof W);var W;const J=C("HTMLFormElement"),K=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),X=C("RegExp"),G=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};I(n,((n,s)=>{let a;!1!==(a=t(n,s,e))&&(r[s]=a||n)})),Object.defineProperties(e,r)},Z=C("AsyncFunction"),Q=(Y="function"==typeof setImmediate,ee=O(q.postMessage),Y?setImmediate:ee?(te=`axios@${Math.random()}`,ne=[],q.addEventListener("message",(({source:e,data:t})=>{e===q&&t===te&&ne.length&&ne.shift()()}),!1),e=>{ne.push(e),q.postMessage(te,"*")}):e=>setTimeout(e));var Y,ee,te,ne;const re="undefined"!=typeof queueMicrotask?queueMicrotask.bind(q):"undefined"!=typeof process&&process.nextTick||Q,se={isArray:R,isArrayBuffer:N,isBuffer:function(e){return null!==e&&!S(e)&&null!==e.constructor&&!S(e.constructor)&&O(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||O(e.append)&&("formdata"===(t=b(e))||"object"===t&&O(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&N(e.buffer),t},isString:k,isNumber:T,isBoolean:e=>!0===e||!1===e,isObject:x,isPlainObject:A,isReadableStream:F,isRequest:D,isResponse:M,isHeaders:H,isUndefined:S,isDate:j,isFile:L,isBlob:B,isRegExp:X,isFunction:O,isStream:e=>x(e)&&O(e.pipe),isURLSearchParams:P,isTypedArray:V,isFileList:U,forEach:I,merge:function e(){const{caseless:t}=z(this)&&this||{},n={},r=(r,s)=>{const a=t&&$(n,s)||s;A(n[a])&&A(r)?n[a]=e(n[a],r):A(r)?n[a]=e({},r):R(r)?n[a]=r.slice():n[a]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&I(arguments[e],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>(I(t,((t,r)=>{n&&O(t)?e[r]=f(t,n):e[r]=t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let s,a,o;const i={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),a=s.length;a-- >0;)o=s[a],r&&!r(o,e,t)||i[o]||(t[o]=e[o],i[o]=!0);e=!1!==n&&E(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:b,kindOfTest:C,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(R(e))return e;let t=e.length;if(!T(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[y]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:J,hasOwnProperty:K,hasOwnProp:K,reduceDescriptors:G,freezeMethods:e=>{G(e,((t,n)=>{if(O(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];O(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return R(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:$,global:q,isContextDefined:z,isSpecCompliantForm:function(e){return!!(e&&O(e.append)&&"FormData"===e[w]&&e[y])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(x(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const s=R(e)?[]:{};return I(e,((e,t)=>{const a=n(e,r+1);!S(a)&&(s[t]=a)})),t[r]=void 0,s}}return e};return n(e,0)},isAsyncFn:Z,isThenable:e=>e&&(x(e)||O(e))&&O(e.then)&&O(e.catch),setImmediate:Q,asap:re,isIterable:e=>null!=e&&O(e[y])};function ae(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}se.inherits(ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:se.toJSONObject(this.config),code:this.code,status:this.status}}});const oe=ae.prototype,ie={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{ie[e]={value:e}})),Object.defineProperties(ae,ie),Object.defineProperty(oe,"isAxiosError",{value:!0}),ae.from=(e,t,n,r,s,a)=>{const o=Object.create(oe);return se.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),ae.call(o,e.message,t,n,r,s),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};const le=ae;function ce(e){return se.isPlainObject(e)||se.isArray(e)}function ue(e){return se.endsWith(e,"[]")?e.slice(0,-2):e}function de(e,t,n){return e?e.concat(t).map((function(e,t){return e=ue(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const me=se.toFlatObject(se,{},null,(function(e){return/^is[A-Z]/.test(e)})),pe=function(e,t,n){if(!se.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=se.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!se.isUndefined(t[e])}))).metaTokens,s=n.visitor||c,a=n.dots,o=n.indexes,i=(n.Blob||"undefined"!=typeof Blob&&Blob)&&se.isSpecCompliantForm(t);if(!se.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(se.isDate(e))return e.toISOString();if(!i&&se.isBlob(e))throw new le("Blob is not supported. Use a Buffer instead.");return se.isArrayBuffer(e)||se.isTypedArray(e)?i&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,s){let i=e;if(e&&!s&&"object"==typeof e)if(se.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(se.isArray(e)&&function(e){return se.isArray(e)&&!e.some(ce)}(e)||(se.isFileList(e)||se.endsWith(n,"[]"))&&(i=se.toArray(e)))return n=ue(n),i.forEach((function(e,r){!se.isUndefined(e)&&null!==e&&t.append(!0===o?de([n],r,a):null===o?n:n+"[]",l(e))})),!1;return!!ce(e)||(t.append(de(s,n,a),l(e)),!1)}const u=[],d=Object.assign(me,{defaultVisitor:c,convertValue:l,isVisitable:ce});if(!se.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!se.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),se.forEach(n,(function(n,a){!0===(!(se.isUndefined(n)||null===n)&&s.call(t,n,se.isString(a)?a.trim():a,r,d))&&e(n,r?r.concat(a):[a])})),u.pop()}}(e),t};function he(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function fe(e,t){this._pairs=[],e&&pe(e,this,t)}const ge=fe.prototype;ge.append=function(e,t){this._pairs.push([e,t])},ge.toString=function(e){const t=e?function(t){return e.call(this,t,he)}:he;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Ee=fe;function ye(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function we(e,t,n){if(!t)return e;const r=n&&n.encode||ye;se.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let a;if(a=s?s(t,n):se.isURLSearchParams(t)?t.toString():new Ee(t,n).toString(r),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}const be=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){se.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},ve={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ce={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Ee,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},_e="undefined"!=typeof window&&"undefined"!=typeof document,Re="object"==typeof navigator&&navigator||void 0,Se=_e&&(!Re||["ReactNative","NativeScript","NS"].indexOf(Re.product)<0),Ne="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,ke=_e&&window.location.href||"http://localhost",Oe={...r,...Ce},Te=function(e){function t(e,n,r,s){let a=e[s++];if("__proto__"===a)return!0;const o=Number.isFinite(+a),i=s>=e.length;return a=!a&&se.isArray(r)?r.length:a,i?(se.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&se.isObject(r[a])||(r[a]=[]),t(e,n,r[a],s)&&se.isArray(r[a])&&(r[a]=function(e){const t={},n=Object.keys(e);let r;const s=n.length;let a;for(r=0;r<s;r++)a=n[r],t[a]=e[a];return t}(r[a])),!o)}if(se.isFormData(e)&&se.isFunction(e.entries)){const n={};return se.forEachEntry(e,((e,r)=>{t(function(e){return se.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null},xe={transitional:ve,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,s=se.isObject(e);if(s&&se.isHTMLForm(e)&&(e=new FormData(e)),se.isFormData(e))return r?JSON.stringify(Te(e)):e;if(se.isArrayBuffer(e)||se.isBuffer(e)||se.isStream(e)||se.isFile(e)||se.isBlob(e)||se.isReadableStream(e))return e;if(se.isArrayBufferView(e))return e.buffer;if(se.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return pe(e,new Oe.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Oe.isNode&&se.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=se.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return pe(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),function(e){if(se.isString(e))try{return(0,JSON.parse)(e),se.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||xe.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(se.isResponse(e)||se.isReadableStream(e))return e;if(e&&se.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw le.from(e,le.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Oe.classes.FormData,Blob:Oe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};se.forEach(["delete","get","head","post","put","patch"],(e=>{xe.headers[e]={}}));const Ae=xe,je=se.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Le=Symbol("internals");function Be(e){return e&&String(e).trim().toLowerCase()}function Ue(e){return!1===e||null==e?e:se.isArray(e)?e.map(Ue):String(e)}function Pe(e,t,n,r,s){return se.isFunction(r)?r.call(this,t,n):(s&&(t=n),se.isString(t)?se.isString(r)?-1!==t.indexOf(r):se.isRegExp(r)?r.test(t):void 0:void 0)}class Fe{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function s(e,t,n){const s=Be(t);if(!s)throw new Error("header name must be a non-empty string");const a=se.findKey(r,s);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=Ue(e))}const a=(e,t)=>se.forEach(e,((e,n)=>s(e,n,t)));if(se.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(se.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let n,r,s;return e&&e.split("\n").forEach((function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),r=e.substring(s+1).trim(),!n||t[n]&&je[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(se.isObject(e)&&se.isIterable(e)){let n,r,s={};for(const t of e){if(!se.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[r=t[0]]=(n=s[r])?se.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}a(s,t)}else null!=e&&s(t,e,n);return this}get(e,t){if(e=Be(e)){const n=se.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(se.isFunction(t))return t.call(this,e,n);if(se.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Be(e)){const n=se.findKey(this,e);return!(!n||void 0===this[n]||t&&!Pe(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function s(e){if(e=Be(e)){const s=se.findKey(n,e);!s||t&&!Pe(0,n[s],s,t)||(delete n[s],r=!0)}}return se.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const s=t[n];e&&!Pe(0,this[s],s,e,!0)||(delete this[s],r=!0)}return r}normalize(e){const t=this,n={};return se.forEach(this,((r,s)=>{const a=se.findKey(n,s);if(a)return t[a]=Ue(r),void delete t[s];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(s):String(s).trim();o!==s&&delete t[s],t[o]=Ue(r),n[o]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return se.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&se.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[Le]=this[Le]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Be(e);t[r]||(function(e,t){const n=se.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,s){return this[r].call(this,t,e,n,s)},configurable:!0})}))}(n,e),t[r]=!0)}return se.isArray(e)?e.forEach(r):r(e),this}}Fe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),se.reduceDescriptors(Fe.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),se.freezeMethods(Fe);const De=Fe;function Me(e,t){const n=this||Ae,r=t||n,s=De.from(r.headers);let a=r.data;return se.forEach(e,(function(e){a=e.call(n,a,s.normalize(),t?t.status:void 0)})),s.normalize(),a}function He(e){return!(!e||!e.__CANCEL__)}function Ie(e,t,n){le.call(this,null==e?"canceled":e,le.ERR_CANCELED,t,n),this.name="CanceledError"}se.inherits(Ie,le,{__CANCEL__:!0});const $e=Ie;function qe(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new le("Request failed with status code "+n.status,[le.ERR_BAD_REQUEST,le.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const ze=(e,t,n=3)=>{let r=0;const s=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s,a=0,o=0;return t=void 0!==t?t:1e3,function(i){const l=Date.now(),c=r[o];s||(s=l),n[a]=i,r[a]=l;let u=o,d=0;for(;u!==a;)d+=n[u++],u%=e;if(a=(a+1)%e,a===o&&(o=(o+1)%e),l-s<t)return;const m=c&&l-c;return m?Math.round(1e3*d/m):void 0}}(50,250);return function(e,t){let n,r,s=0,a=1e3/t;const o=(t,a=Date.now())=>{s=a,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),i=t-s;i>=a?o(e,t):(n=e,r||(r=setTimeout((()=>{r=null,o(n)}),a-i)))},()=>n&&o(n)]}((n=>{const a=n.loaded,o=n.lengthComputable?n.total:void 0,i=a-r,l=s(i);r=a,e({loaded:a,total:o,progress:o?a/o:void 0,bytes:i,rate:l||void 0,estimated:l&&o&&a<=o?(o-a)/l:void 0,event:n,lengthComputable:null!=o,[t?"download":"upload"]:!0})}),n)},Ve=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},We=e=>(...t)=>se.asap((()=>e(...t))),Je=Oe.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Oe.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Oe.origin),Oe.navigator&&/(msie|trident)/i.test(Oe.navigator.userAgent)):()=>!0,Ke=Oe.hasStandardBrowserEnv?{write(e,t,n,r,s,a){const o=[e+"="+encodeURIComponent(t)];se.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),se.isString(r)&&o.push("path="+r),se.isString(s)&&o.push("domain="+s),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Xe(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Ge=e=>e instanceof De?{...e}:e;function Ze(e,t){t=t||{};const n={};function r(e,t,n,r){return se.isPlainObject(e)&&se.isPlainObject(t)?se.merge.call({caseless:r},e,t):se.isPlainObject(t)?se.merge({},t):se.isArray(t)?t.slice():t}function s(e,t,n,s){return se.isUndefined(t)?se.isUndefined(e)?void 0:r(void 0,e,0,s):r(e,t,0,s)}function a(e,t){if(!se.isUndefined(t))return r(void 0,t)}function o(e,t){return se.isUndefined(t)?se.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function i(n,s,a){return a in t?r(n,s):a in e?r(void 0,n):void 0}const l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(e,t,n)=>s(Ge(e),Ge(t),0,!0)};return se.forEach(Object.keys(Object.assign({},e,t)),(function(r){const a=l[r]||s,o=a(e[r],t[r],r);se.isUndefined(o)&&a!==i||(n[r]=o)})),n}const Qe=e=>{const t=Ze({},e);let n,{data:r,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:o,headers:i,auth:l}=t;if(t.headers=i=De.from(i),t.url=we(Xe(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),se.isFormData(r))if(Oe.hasStandardBrowserEnv||Oe.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(!1!==(n=i.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}if(Oe.hasStandardBrowserEnv&&(s&&se.isFunction(s)&&(s=s(t)),s||!1!==s&&Je(t.url))){const e=a&&o&&Ke.read(o);e&&i.set(a,e)}return t},Ye="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=Qe(e);let s=r.data;const a=De.from(r.headers).normalize();let o,i,l,c,u,{responseType:d,onUploadProgress:m,onDownloadProgress:p}=r;function h(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}let f=new XMLHttpRequest;function g(){if(!f)return;const r=De.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());qe((function(e){t(e),h()}),(function(e){n(e),h()}),{data:d&&"text"!==d&&"json"!==d?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f}),f=null}f.open(r.method.toUpperCase(),r.url,!0),f.timeout=r.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(n(new le("Request aborted",le.ECONNABORTED,e,f)),f=null)},f.onerror=function(){n(new le("Network Error",le.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const s=r.transitional||ve;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new le(t,s.clarifyTimeoutError?le.ETIMEDOUT:le.ECONNABORTED,e,f)),f=null},void 0===s&&a.setContentType(null),"setRequestHeader"in f&&se.forEach(a.toJSON(),(function(e,t){f.setRequestHeader(t,e)})),se.isUndefined(r.withCredentials)||(f.withCredentials=!!r.withCredentials),d&&"json"!==d&&(f.responseType=r.responseType),p&&([l,u]=ze(p,!0),f.addEventListener("progress",l)),m&&f.upload&&([i,c]=ze(m),f.upload.addEventListener("progress",i),f.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(o=t=>{f&&(n(!t||t.type?new $e(null,e,f):t),f.abort(),f=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o)));const E=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);E&&-1===Oe.protocols.indexOf(E)?n(new le("Unsupported protocol "+E+":",le.ERR_BAD_REQUEST,e)):f.send(s||null)}))},et=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const s=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;r.abort(t instanceof le?t:new $e(t instanceof Error?t.message:t))}};let a=t&&setTimeout((()=>{a=null,s(new le(`timeout ${t} of ms exceeded`,le.ETIMEDOUT))}),t);const o=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)})),e=null)};e.forEach((e=>e.addEventListener("abort",s)));const{signal:i}=r;return i.unsubscribe=()=>se.asap(o),i}},tt=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,s=0;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},nt=(e,t,n,r)=>{const s=async function*(e,t){for await(const n of async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}}(e))yield*tt(n,t)}(e,t);let a,o=0,i=e=>{a||(a=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await s.next();if(t)return i(),void e.close();let a=r.byteLength;if(n){let e=o+=a;n(e)}e.enqueue(new Uint8Array(r))}catch(e){throw i(e),e}},cancel:e=>(i(e),s.return())},{highWaterMark:2})},rt="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,st=rt&&"function"==typeof ReadableStream,at=rt&&("function"==typeof TextEncoder?(ot=new TextEncoder,e=>ot.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var ot;const it=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},lt=st&&it((()=>{let e=!1;const t=new Request(Oe.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),ct=st&&it((()=>se.isReadableStream(new Response("").body))),ut={stream:ct&&(e=>e.body)};var dt;rt&&(dt=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!ut[e]&&(ut[e]=se.isFunction(dt[e])?t=>t[e]():(t,n)=>{throw new le(`Response type '${e}' is not supported`,le.ERR_NOT_SUPPORT,n)})})));const mt={http:null,xhr:Ye,fetch:rt&&(async e=>{let{url:t,method:n,data:r,signal:s,cancelToken:a,timeout:o,onDownloadProgress:i,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:m}=Qe(e);c=c?(c+"").toLowerCase():"text";let p,h=et([s,a&&a.toAbortSignal()],o);const f=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let g;try{if(l&&lt&&"get"!==n&&"head"!==n&&0!==(g=await(async(e,t)=>{const n=se.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(se.isBlob(e))return e.size;if(se.isSpecCompliantForm(e)){const t=new Request(Oe.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return se.isArrayBufferView(e)||se.isArrayBuffer(e)?e.byteLength:(se.isURLSearchParams(e)&&(e+=""),se.isString(e)?(await at(e)).byteLength:void 0)})(t):n})(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(se.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=Ve(g,ze(We(l)));r=nt(n.body,65536,e,t)}}se.isString(d)||(d=d?"include":"omit");const s="credentials"in Request.prototype;p=new Request(t,{...m,signal:h,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:s?d:void 0});let a=await fetch(p);const o=ct&&("stream"===c||"response"===c);if(ct&&(i||o&&f)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=a[t]}));const t=se.toFiniteNumber(a.headers.get("content-length")),[n,r]=i&&Ve(t,ze(We(i),!0))||[];a=new Response(nt(a.body,65536,n,(()=>{r&&r(),f&&f()})),e)}c=c||"text";let E=await ut[se.findKey(ut,c)||"text"](a,e);return!o&&f&&f(),await new Promise(((t,n)=>{qe(t,n,{data:E,headers:De.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:p})}))}catch(t){if(f&&f(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message))throw Object.assign(new le("Network Error",le.ERR_NETWORK,e,p),{cause:t.cause||t});throw le.from(t,t&&t.code,e,p)}})};se.forEach(mt,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const pt=e=>`- ${e}`,ht=e=>se.isFunction(e)||null===e||!1===e,ft=e=>{e=se.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let a=0;a<t;a++){let t;if(n=e[a],r=n,!ht(n)&&(r=mt[(t=String(n)).toLowerCase()],void 0===r))throw new le(`Unknown adapter '${t}'`);if(r)break;s[t||"#"+a]=r}if(!r){const e=Object.entries(s).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));let n=t?e.length>1?"since :\n"+e.map(pt).join("\n"):" "+pt(e[0]):"as no adapter specified";throw new le("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function gt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new $e(null,e)}function Et(e){return gt(e),e.headers=De.from(e.headers),e.data=Me.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ft(e.adapter||Ae.adapter)(e).then((function(t){return gt(e),t.data=Me.call(e,e.transformResponse,t),t.headers=De.from(t.headers),t}),(function(t){return He(t)||(gt(e),t&&t.response&&(t.response.data=Me.call(e,e.transformResponse,t.response),t.response.headers=De.from(t.response.headers))),Promise.reject(t)}))}const yt={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{yt[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const wt={};yt.transitional=function(e,t,n){function r(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,s,a)=>{if(!1===e)throw new le(r(s," has been removed"+(t?" in "+t:"")),le.ERR_DEPRECATED);return t&&!wt[s]&&(wt[s]=!0,console.warn(r(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,s,a)}},yt.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const bt={assertOptions:function(e,t,n){if("object"!=typeof e)throw new le("options must be an object",le.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const a=r[s],o=t[a];if(o){const t=e[a],n=void 0===t||o(t,a,e);if(!0!==n)throw new le("option "+a+" must be "+n,le.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new le("Unknown option "+a,le.ERR_BAD_OPTION)}},validators:yt},vt=bt.validators;class Ct{constructor(e){this.defaults=e||{},this.interceptors={request:new be,response:new be}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Ze(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:s}=t;void 0!==n&&bt.assertOptions(n,{silentJSONParsing:vt.transitional(vt.boolean),forcedJSONParsing:vt.transitional(vt.boolean),clarifyTimeoutError:vt.transitional(vt.boolean)},!1),null!=r&&(se.isFunction(r)?t.paramsSerializer={serialize:r}:bt.assertOptions(r,{encode:vt.function,serialize:vt.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),bt.assertOptions(t,{baseUrl:vt.spelling("baseURL"),withXsrfToken:vt.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&se.merge(s.common,s[t.method]);s&&se.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete s[e]})),t.headers=De.concat(a,s);const o=[];let i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!i){const e=[Et.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=o.length;let m=t;for(d=0;d<u;){const e=o[d++],t=o[d++];try{m=e(m)}catch(e){t.call(this,e);break}}try{c=Et.call(this,m)}catch(e){return Promise.reject(e)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return we(Xe((e=Ze(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}se.forEach(["delete","get","head","options"],(function(e){Ct.prototype[e]=function(t,n){return this.request(Ze(n||{},{method:e,url:t,data:(n||{}).data}))}})),se.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,s){return this.request(Ze(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Ct.prototype[e]=t(),Ct.prototype[e+"Form"]=t(!0)}));const _t=Ct;class Rt{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,s){n.reason||(n.reason=new $e(e,r,s),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Rt((function(t){e=t})),cancel:e}}}const St=Rt,Nt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Nt).forEach((([e,t])=>{Nt[t]=e}));const kt=Nt,Ot=function e(t){const n=new _t(t),r=f(_t.prototype.request,n);return se.extend(r,_t.prototype,n,{allOwnKeys:!0}),se.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Ze(t,n))},r}(Ae);Ot.Axios=_t,Ot.CanceledError=$e,Ot.CancelToken=St,Ot.isCancel=He,Ot.VERSION="1.9.0",Ot.toFormData=pe,Ot.AxiosError=le,Ot.Cancel=Ot.CanceledError,Ot.all=function(e){return Promise.all(e)},Ot.spread=function(e){return function(t){return e.apply(null,t)}},Ot.isAxiosError=function(e){return se.isObject(e)&&!0===e.isAxiosError},Ot.mergeConfig=Ze,Ot.AxiosHeaders=De,Ot.formToJSON=e=>Te(se.isHTMLForm(e)?new FormData(e):e),Ot.getAdapter=ft,Ot.HttpStatusCode=kt,Ot.default=Ot;const Tt=Ot,xt=({caseId:e,refreshMessages:t,refreshCases:n,pendingFiles:r,setPendingFiles:a,pendingUploads:o,setPendingUploads:l})=>{const[c,u]=(0,s.useState)(""),[d,m]=(0,s.useState)(!1),{session:f}=(0,s.useContext)(p),g=(0,s.useRef)(null),E=(0,s.useRef)(null);(0,s.useEffect)((()=>{g.current?.focus()}),[e]);const y=()=>{const e=g.current;e&&(e.style.height="auto",e.style.height=e.scrollHeight+"px")},w=async s=>{if(s.preventDefault(),(c.trim()||0!==r.length)&&!d){m(!0);try{c.trim()&&await h(`/support-cases/${e}/messages`,"POST",{message:c,token:f.token,email:f.email,first_name:f.firstName,website:""});const s=[...r];s.forEach((e=>{l((t=>[...t,{id:`${e.name}-${Date.now()}-${Math.random()}`,file:e}]))})),a([]),E.current&&(E.current.value=""),await new Promise((e=>setTimeout(e,0)));for(const t of s){const n=new FormData;n.append("file",t),n.append("token",f.token||""),n.append("email",f.email||""),n.append("first_name",f.firstName||""),await Tt.post(`/wp-json/hrsc/v1/support-cases/${e}/upload`,n,{headers:{"X-WP-Nonce":window.hrscChatVars?.nonce}})}u(""),await Promise.all([t(e,f),n()]),g.current?.focus(),y()}catch(e){alert((0,i.__)("Failed to send message: ","hr-support-chat")+e.message)}finally{m(!1)}}};return(0,s.createElement)("form",{onSubmit:w,className:"JwsTxRQf"},r.length>0&&(0,s.createElement)("div",{className:"du2DlXog"},r.map(((e,t)=>(0,s.createElement)("div",{key:t,className:"CMwvUWuT"},(0,s.createElement)("div",{className:"EgX1AsnM"},e.type.startsWith("image/")?(0,s.createElement)("img",{src:URL.createObjectURL(e),alt:e.name}):(0,s.createElement)("div",{className:"ZGNCPfva"},"ðŸ“„")),(0,s.createElement)("div",{className:"KuYfi83B"},(0,s.createElement)("span",{className:"XO0WGZUD"},e.name),(0,s.createElement)("span",{className:"Ywy0f_6C"},e.type||(0,i.__)("Unknown","hr-support-chat"))),(0,s.createElement)("button",{type:"button",onClick:()=>(e=>{a((t=>t.filter(((t,n)=>n!==e))))})(t),className:"iMw71YZd","aria-label":(0,i.__)("Remove file","hr-support-chat")},"Ã—"))))),(0,s.createElement)("div",{className:"f2dEV9FL"},(0,s.createElement)("textarea",{ref:g,value:c,onChange:e=>{u(e.target.value),y()},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),d||w(e))},placeholder:(0,i.__)("Type your message...","hr-support-chat"),className:"KuTmNJtV",rows:1}),(0,s.createElement)("input",{type:"file",ref:E,style:{display:"none"},multiple:!0,onChange:e=>{e.target.files?.length>0&&(a((t=>[...t,...Array.from(e.target.files)])),e.target.value="")}}),(0,s.createElement)("button",{type:"button",className:"HKie4EyU",onClick:()=>E.current?.click(),"aria-label":(0,i.__)("Upload files","hr-support-chat")},"+"),(0,s.createElement)("button",{type:"submit",disabled:d||!c.trim()&&0===r.length,"aria-label":(0,i.__)("Send message","hr-support-chat"),className:"rkM4QzRH"},(0,s.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.1918 8.90615C15.6381 8.45983 16.3618 8.45983 16.8081 8.90615L21.9509 14.049C22.3972 14.4953 22.3972 15.2189 21.9509 15.6652C21.5046 16.1116 20.781 16.1116 20.3347 15.6652L17.1428 12.4734V22.2857C17.1428 22.9169 16.6311 23.4286 15.9999 23.4286C15.3688 23.4286 14.8571 22.9169 14.8571 22.2857V12.4734L11.6652 15.6652C11.2189 16.1116 10.4953 16.1116 10.049 15.6652C9.60265 15.2189 9.60265 14.4953 10.049 14.049L15.1918 8.90615Z",fill:"currentColor"})))))},At={chatContainer:"uCAP1A1n",messagesArea:"F6C1FW6Y",messagesWrapper:"DEOYW7p0",emptyText:"BQpiuRB4",loadingText:"j6nWCkIZ",statusMessage:"iuXg4hSv",systemMessage:"dSfwQwzx",messageRow:"AOX45D9E",bubble:"UTa7UUI2",userBubble:"B1c74F32",hrBubble:"vmMReC_0",uploadedBubble:"MK2yjdpw",meta:"CFypJxkr",inputBar:"WY51TTm8",inputWrapper:"K6VK3Gl2",dragOverlay:"rg7o_uvD","fade-in":"XCb7WGv0",dragMessage:"Qnhuz1oH",uploadButton:"dyhGCZV5"},jt=({caseId:e,messages:t,refreshMessages:n,loading:r,attachments:a,setAttachments:o,refreshCases:l,isHR:c})=>{const{session:u}=(0,s.useContext)(p),d=(0,s.useRef)(null),m=(0,s.useRef)(null),h=(0,s.useRef)(null),[f,g]=(0,s.useState)(!1),[E,y]=(0,s.useState)(null),[w,b]=(0,s.useState)(!1),[v,C]=(0,s.useState)([]),[_,R]=(0,s.useState)([]),S=async()=>{await n(e,u),f||g(!0)};(0,s.useEffect)((()=>{e&&u&&(S(),(async()=>{try{const t=await fetch(`/wp-json/hrsc/v1/support-cases/${e}/attachments`),n=await t.json();o(n)}catch(e){console.error("Failed to load attachments",e)}})())}),[e,u]),(0,s.useEffect)((()=>{const e=setInterval((()=>{"visible"===document.visibilityState&&navigator.onLine&&S()}),1e4);return()=>clearInterval(e)}),[e,u]);const N=(0,s.useRef)(null);if((0,s.useEffect)((()=>{if(!t.length)return;const e=t[t.length-1];N.current!==e.id&&(N.current=e.id,d.current&&d.current.scrollIntoView({behavior:"smooth"}))}),[t]),(0,s.useEffect)((()=>{const e=()=>{"hidden"===document.visibilityState?y((0,i.__)("Chat paused (tab inactive)","hr-support-chat")):navigator.onLine?y(null):y((0,i.__)("You are offline","hr-support-chat"))},t=()=>{"visible"===document.visibilityState&&y(null)};return document.addEventListener("visibilitychange",e),window.addEventListener("online",t),window.addEventListener("offline",(()=>y((0,i.__)("You are offline","hr-support-chat")))),e(),()=>{document.removeEventListener("visibilitychange",e),window.removeEventListener("online",t),window.removeEventListener("offline",e)}}),[]),(0,s.useEffect)((()=>{const e=h.current;if(!e)return;const t=e=>{e.preventDefault(),b(!0)},n=t=>{null!==t.relatedTarget&&e.contains(t.relatedTarget)||b(!1)};return e.addEventListener("dragenter",t),e.addEventListener("dragleave",n),()=>{e.removeEventListener("dragenter",t),e.removeEventListener("dragleave",n)}}),[]),(0,s.useEffect)((()=>{_.length&&t.length&&R((e=>e.filter((e=>(d.current.scrollIntoView({behavior:"smooth"}),!t.some((t=>t.content&&e.file&&t.content.includes(e.file.name))))))))}),[t]),(0,s.useEffect)((()=>{f&&d.current&&d.current.scrollIntoView({behavior:"smooth"})}),[f]),(0,s.useEffect)((()=>{_.length&&d.current&&d.current.scrollIntoView({behavior:"smooth"})}),[_]),!e)return(0,s.createElement)("div",{className:At.placeholder},(0,i.__)("Select a case to view messages","hr-support-chat"));const k=c?At.hrBubble:At.userBubble;return(0,s.createElement)("div",{className:At.chatContainer,ref:h,onDragOver:e=>{e.preventDefault(),b(!0)},onDrop:e=>{if(e.preventDefault(),b(!1),e.dataTransfer.files?.length>0){const t=Array.from(e.dataTransfer.files);C((e=>[...e,...t]))}}},w&&(0,s.createElement)("div",{className:At.dragOverlay,onDragLeave:()=>b(!1)},(0,s.createElement)("div",{className:At.dragMessage},(0,i.__)("Drop files to upload","hr-support-chat"))),(0,s.createElement)("div",{className:At.messagesArea},(0,s.createElement)("div",{className:At.messagesWrapper},f?0===t.length?(0,s.createElement)("p",{className:At.emptyText},(0,i.__)("No messages yet. Start the conversation!","hr-support-chat")):null:(0,s.createElement)("p",{className:At.loadingText},(0,i.__)("Loading conversationâ€¦","hr-support-chat")),E&&(0,s.createElement)("div",{className:At.statusMessage},E),t.map(((e,t)=>{if(e.is_system)return(0,s.createElement)("div",{key:t,className:At.systemMessage},e.content);const n=e.is_hr?At.hrBubble:At.userBubble,r="hrsc_attachment"===e.comment_type;return console.log("msg",e),console.log("comment_type",e.comment_type),(0,s.createElement)("div",{key:t,className:At.messageRow},(0,s.createElement)("div",{className:`${At.bubble} ${n} ${r?At.uploadedBubble:""}`,dangerouslySetInnerHTML:{__html:e.content}}))})),_.map(((e,t)=>(0,s.createElement)("div",{key:e.id||t,className:At.messageRow},(0,s.createElement)("div",{className:`${At.bubble} ${k} ${At.uploadingBubble}`},(0,s.createElement)("div",{style:{opacity:.6}},(0,s.createElement)("div",null,"ðŸ“Ž ",(0,i.__)("Uploading file...","hr-support-chat")),e.file&&e.file.type.startsWith("image/")?(0,s.createElement)("img",{src:URL.createObjectURL(e.file),alt:e.file.name,style:{maxWidth:200,borderRadius:8,marginTop:8}}):(0,s.createElement)("div",null,e.file?.name)))))),(0,s.createElement)("div",{ref:d}))),(0,s.createElement)("div",{className:At.inputBar},(0,s.createElement)("input",{type:"file",ref:m,style:{display:"none"},multiple:!0,onChange:e=>C((t=>[...t,...Array.from(e.target.files)]))}),(0,s.createElement)("div",{className:At.inputWrapper},(0,s.createElement)(xt,{caseId:e,refreshMessages:n,refreshCases:l,pendingFiles:v,setPendingFiles:C,pendingUploads:_,setPendingUploads:R,messagesEndRef:d}))))},Lt="oqsIeVGO",Bt=({supportCase:e,canEditTitle:t,onTitleUpdate:n,onToggleInfo:r,onToggleAttachments:a,showAttachments:o,uploading:l,onToggleSidebar:c,isHR:u})=>{const[d,m]=(0,s.useState)(!1),[p,h]=(0,s.useState)("");(0,s.useEffect)((()=>{e?.title?.rendered&&h(e.title)}),[e?.id,e?.title]);const f=u?e?.title||(0,i.__)("Untitled Case","hr-support-chat"):(0,i.__)("HR Chat","hr-support-chat"),g=()=>{const t=p.trim();u&&t&&t!==e?.title&&n?.(t),m(!1)};return(0,s.createElement)("div",{className:"wGwua7jE"},(0,s.createElement)("button",{onClick:c,className:"E0B52FLt","aria-label":(0,i.__)("Toggle sidebar","hr-support-chat")},(0,s.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 8C3 7.44772 3.44772 7 4 7H20C20.5523 7 21 7.44772 21 8C21 8.55228 20.5523 9 20 9H4C3.44772 9 3 8.55228 3 8ZM3 16C3 15.4477 3.44772 15 4 15H14C14.5523 15 15 15.4477 15 16C15 16.5523 14.5523 17 14 17H4C3.44772 17 3 16.5523 3 16Z",fill:"currentColor"}))),(0,s.createElement)("div",{className:"gOMPkjr7"},d&&u?(0,s.createElement)("input",{type:"text",value:p,onChange:e=>h(e.target.value),onBlur:g,onKeyDown:e=>{"Enter"===e.key&&g()},autoFocus:!0,className:"hqQzKtTn"}):(0,s.createElement)("div",{className:"BtQ7R1AY"},(0,s.createElement)("span",{className:"MATJmxoc"},f),u&&t&&(0,s.createElement)("button",{className:"jfEWuoyk",onClick:()=>{h(e?.title||""),m(!0)},title:(0,i.__)("Edit title","hr-support-chat")},(0,s.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",version:"1.1"},(0,s.createElement)("path",{d:"M11.040000000000001 0.035904C8.6556 0.237768 6.436751999999999 1.1044559999999999 4.596 2.552928C0.097776 6.092592 -1.29048 12.297192 1.276704 17.388C3.326592 21.452952000000003 7.457352 24 12 24C13.889111999999999 24 15.703296 23.569944 17.388 22.722792000000002C19.507656 21.656928 21.267984000000002 19.983552 22.444584000000003 17.916C23.304456000000002 16.404984000000002 23.866968 14.548704 23.966616000000002 12.89328C23.975592 12.744384 23.992176 12.616848000000001 24.003456 12.609863999999998C24.01476 12.60288 24.023832000000002 12.314304 24.02364 11.968584C24.023424000000002 11.622864 24.014256000000003 11.354208 24.00324 11.37156C23.99148 11.390136 23.976528000000002 11.286336 23.966952000000003 11.11956C23.872152 9.468672000000002 23.307096 7.599624 22.444584000000003 6.0840000000000005C20.588616000000002 2.822664 17.317152 0.606696 13.620000000000001 0.106584C12.849120000000001 0.002304 11.782104 -0.026928000000000004 11.040000000000001 0.035904M11.256 1.5270480000000002C9.797136 1.6568640000000001 8.65356 1.963488 7.427904 2.553528C5.321688 3.5674560000000004 3.5674560000000004 5.321688 2.553528 7.427904C2.027976 8.519616 1.71852 9.584952 1.567056 10.824C1.5064080000000002 11.320152 1.5064080000000002 12.679848 1.567056 13.176C1.81272 15.185736 2.561544 16.996488 3.7758 18.517104000000003C5.399928 20.55108 7.65804 21.8952 10.200000000000001 22.341144C10.841736 22.453704000000002 11.13348 22.475496 12 22.475496C12.866520000000001 22.475496 13.158263999999999 22.453704000000002 13.8 22.341144C16.060752 21.944544 18.15036 20.808624 19.687992 19.140432C21.236616 17.460288 22.148112 15.479424 22.432512 13.176C22.493904 12.67884 22.493904 11.321159999999999 22.432512 10.824C22.183896 8.810256 21.431592 6.989808000000001 20.225808 5.484C18.457656 3.2759280000000004 16.02936 1.9231680000000002 13.200000000000001 1.570032C12.913319999999999 1.534248 11.521080000000001 1.5034800000000001 11.256 1.5270480000000002M15.276 5.313791999999999C14.73696 5.4041760000000005 14.298672000000002 5.592648 13.860552 5.922384C13.78104 5.982216 11.969520000000001 7.7764560000000005 9.834912000000001 9.909576C6.389400000000001 13.352736000000002 5.94696 13.80312 5.892647999999999 13.92276C5.840184000000001 14.038272000000001 5.791848 14.333256000000002 5.554296 15.98676C5.359872 17.34012 5.2807200000000005 17.954448 5.28912 18.044808C5.321448 18.391992 5.610144 18.678936 5.9597999999999995 18.71136C6.044040000000001 18.719160000000002 6.705648 18.633552 8.016 18.44532C9.678864 18.206424000000002 9.964704000000001 18.159528 10.068 18.108672000000002C10.2444 18.021792 18.035616 10.22184 18.20388 9.963648C18.720408000000003 9.171072 18.852552 8.248392 18.574224 7.377792C18.2424 6.339816 17.383344 5.567208000000001 16.308 5.33964C16.053072 5.285712 15.522672 5.272416 15.276 5.313791999999999M15.351312000000002 6.8300399999999994C15.132936 6.882912 14.930544 6.991416000000001 14.735040000000001 7.160424C14.636568 7.245576 12.917616 8.955216 10.915152 10.959624L7.274328 14.604000000000001 7.101 15.821832000000002C7.005672000000001 16.491648 6.935016 17.047008 6.943992000000001 17.056008000000002C6.952992000000001 17.064984000000003 7.508352 16.994400000000002 8.178168 16.899168L9.396 16.725984 13.166976 12.952992L16.937952000000003 9.18 17.046312 8.960856000000001C17.177448 8.695728 17.219904 8.479536000000001 17.201208 8.172048C17.178024 7.790136 17.028768000000003 7.478447999999999 16.735319999999998 7.199064000000001C16.537896 7.011096 16.254383999999998 6.859584 16.021584 6.817656C15.828936 6.782952 15.52248 6.788615999999999 15.351312000000002 6.8300399999999994M0.010488 12C0.010488 12.349800000000002 0.013848 12.492912 0.017928 12.318C0.022032000000000003 12.143088 0.022032000000000003 11.856912000000001 0.017928 11.682C0.013848 11.507088 0.010488 11.6502 0.010488 12",stroke:"none",fill:"currentColor","fill-rule":"evenodd","stroke-width":"0.024"}))))),(0,s.createElement)("div",{className:"_SiF3qan"},(0,s.createElement)("button",{onClick:r,title:(0,i.__)("Toggle Info","hr-support-chat"),className:Lt},(0,s.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-0.625 -0.625 20 20",fill:"none",stroke:"#000000","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-info",id:"Info--Streamline-Feather",height:"20",width:"20"},(0,s.createElement)("path",{d:"M1.5625 9.375a7.8125 7.8125 0 1 0 15.625 0 7.8125 7.8125 0 1 0 -15.625 0","stroke-width":"1.25"}),(0,s.createElement)("path",{d:"m9.375 12.5 0 -3.125","stroke-width":"1.25"}),(0,s.createElement)("path",{d:"m9.375 6.25 0.0078125 0","stroke-width":"1.25"}))),(0,s.createElement)("button",{onClick:a,title:(0,i.__)("Toggle Attachments","hr-support-chat"),className:`${Lt} ${o?"ZB1r_9GP":""}`},(0,s.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-0.625 -0.625 20 20",fill:"none",stroke:"#000000","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-upload-cloud",id:"Upload-Cloud--Streamline-Feather",height:"20",width:"20"},(0,s.createElement)("path",{d:"m12.5 12.5 -3.125 -3.125 -3.125 3.125","stroke-width":"1.25"}),(0,s.createElement)("path",{d:"m9.375 9.375 0 7.03125","stroke-width":"1.25"}),(0,s.createElement)("path",{d:"M15.9296875 14.3671875A3.90625 3.90625 0 0 0 14.0625 7.03125h-0.984375A6.25 6.25 0 1 0 2.34375 12.734375","stroke-width":"1.25"}),(0,s.createElement)("path",{d:"m12.5 12.5 -3.125 -3.125 -3.125 3.125","stroke-width":"1.25"})),l&&(0,s.createElement)("span",{className:"t2lic6OP"}))))},Ut=({supportCaseId:e,attachments:t,setAttachments:n})=>((0,s.useEffect)((()=>{!e||t.length>0||(async()=>{try{const t=await fetch(`/wp-json/hrsc/v1/support-cases/${e}/attachments`),r=await t.json();n(r)}catch(e){console.error("Failed to load attachments:",e)}})()}),[e,t,n]),t.length?(0,s.createElement)("div",null,(0,s.createElement)("div",{className:"MxiIvj8x"},t.map((e=>(0,s.createElement)("a",{className:"FS6wTvh3",key:e.id,href:e.source_url,target:"_blank",rel:"noopener noreferrer"},(0,s.createElement)("img",{src:e.thumbnail_url,alt:e.title}),(0,s.createElement)("span",null,e.title)))))):null),Pt=({supportCase:e,attachments:t=[],onCloseCase:n,onDeleteCase:r,onEditCase:a})=>{if(!e)return(0,s.createElement)("p",null,(0,i.__)("Loading case informationâ€¦","hr-support-chat"));const o=e.created_formatted||"-",c=e.modified_formatted||"-",u=e.last_hr_reply||(0,i.__)("No replies yet","hr-support-chat"),d=e.tags||[];return(0,s.createElement)("div",{className:"chat-info"},(0,s.createElement)("div",{className:"chat-info__section"},(0,s.createElement)("div",null,`${(0,i.__)("Case","hr-support-chat")} #${e.id}`),(0,s.createElement)("div",null,e.status," ",(0,s.createElement)("span",{className:`status-dot status-dot--${e.status.toLowerCase()}`})),(0,s.createElement)("div",null,`${(0,i.__)("Category:","hr-support-chat")} ${e.category||"-"}`)),(0,s.createElement)("div",{className:"chat-info__section"},(0,s.createElement)("div",null,`${(0,i.__)("Created:","hr-support-chat")} ${o}`),(0,s.createElement)("div",null,`${(0,i.__)("Last updated:","hr-support-chat")} ${c}`),(0,s.createElement)("div",null,`${(0,i.__)("Last reply from HR:","hr-support-chat")} ${u}`),(0,s.createElement)("div",null,`${(0,i.__)("Messages:","hr-support-chat")} ${e.message_count||0}`)),(0,s.createElement)("div",{className:"chat-info__section"},(0,s.createElement)("div",null,`${(0,i.__)("Attachments:","hr-support-chat")} ${t.length}`)),(0,s.createElement)("div",{className:"chat-info__section chat-info__advisor"},(0,s.createElement)("strong",null,(0,i.__)("HR Advisor","hr-support-chat")),(0,s.createElement)(l,{user:e.assigned_to||{},size:20,showName:!1}),(0,s.createElement)("div",null,e.assigned_to?.name||(0,i.__)("Unassigned","hr-support-chat")),(0,s.createElement)("div",null,e.assigned_to?.email||"-"),(0,s.createElement)("div",null,e.assigned_to?.phone||"-")),(0,s.createElement)("div",{className:"chat-info__section"},(0,s.createElement)("div",null,`${(0,i.__)("Chatter:","hr-support-chat")} ${e.employee_first_name&&e.employee_email?`${e.employee_first_name} (${e.employee_email})`:(0,i.__)("Anonymous","hr-support-chat")}`),d.length>0&&(0,s.createElement)("div",{className:"chat-info__tags"},d.map((e=>(0,s.createElement)("span",{key:e,className:"chat-info__tag"},"#",e))))),(0,s.createElement)("div",{className:"chat-info__actions"},(0,s.createElement)("button",{onClick:n,className:"button button--secondary"},(0,i.__)("Close Case","hr-support-chat")),(0,s.createElement)("button",{onClick:r,className:"button button--danger"},(0,i.__)("Delete","hr-support-chat")),(0,s.createElement)("button",{onClick:a,className:"button button--primary"},(0,i.__)("Edit","hr-support-chat"))))},Ft="o1BY9f71",Dt="It__E4yi",Mt="bEU8gH7B",Ht="ha6Zcl9K",It="lZywlQlV",$t=({selectedCaseId:e,onSelectCase:t})=>{const[n,r]=(0,s.useState)(e||null),[a,o]=(0,s.useState)([]),[l,u]=(0,s.useState)(!1),[d,m]=(0,s.useState)(!1),[f,g]=(0,s.useState)(!1),[E,y]=(0,s.useState)(!1),[w,b]=(0,s.useState)(null),[v,C]=(0,s.useState)(window.innerWidth>768),[_,R]=(0,s.useState)(!1),S=(0,s.useRef)(null),{session:N,ready:k}=(()=>{const{session:e,updateSession:t,ready:n}=(0,s.useContext)(p),r=!!(e?.token||e?.email&&e?.firstName),a=e?.roles?.includes("hr_advisor")||!1,o=e?.roles?.includes("administrator")||!1;return{session:{...e,isHR:a,isAdmin:o},updateSession:t,ready:n,isAuthenticated:r}})(),{cases:O,refreshCases:T,error:x,loading:A}=((e,t)=>{const[n,r]=(0,s.useState)([]),[a,o]=(0,s.useState)(!1),[i,l]=(0,s.useState)(null),c=(0,s.useRef)(!1),u=e?.token||e?.email||e?.id||"guest",d=(0,s.useCallback)((async()=>{if(!t||!e||c.current)return;const n=e.isAdmin||e.isHR,s=!!e.token||!!e.email&&!!e.firstName;if(!n&&!s)return console.warn("â›” Skipping fetch: anonymous user has no valid session"),void l("Anonymous session missing token or identity.");c.current=!0,o(!0);try{const t={};n||(e.token&&(t.token=e.token),e.email&&(t.email=e.email),e.firstName&&(t.first_name=e.firstName));const s=await h("/support-cases","GET",null,t);r(s),l(null)}catch(e){console.error("âŒ Failed to load support cases:",e),l("Failed to load cases")}finally{o(!1),c.current=!1}}),[t,u]);return(0,s.useEffect)((()=>{d()}),[d]),{cases:n,loading:a,error:i,refreshCases:d}})(N,k),{messages:j,refreshMessages:L}=(()=>{const[e,t]=(0,s.useState)([]),[n,r]=(0,s.useState)(!1);return{messages:e,setMessages:t,refreshMessages:async(e,n)=>{if(e&&n){r(!0);try{const r=await h(`/support-cases/${e}/messages`,"GET",null,{token:n.token,email:n.email,first_name:n.firstName});t(r)}catch(e){console.error("Failed to load messages:",e)}finally{r(!1)}}},loading:n}})(),B=async e=>{const t=O.find((t=>t.id===e));b(t||null)};(0,s.useEffect)((()=>{const e=new URLSearchParams(window.location.search).get("case_id");e&&/^\d+$/.test(e)&&r(parseInt(e,10))}),[]),(0,s.useEffect)((()=>{const e=()=>{const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[]),(0,s.useEffect)((()=>{!n&&O.length>0&&(r(O[0].id),t?.(O[0].id))}),[n,O,t]),(0,s.useEffect)((()=>{n&&O.length&&B(n)}),[n,O]),(0,s.useEffect)((()=>{const e=()=>{window.innerWidth>768?C(!0):C(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const U=N?.isHR||N?.isAdmin,P=N?.isHR||N?.isAdmin,F=e=>{"attachments"===e?(g((e=>!e)),y(!1)):"info"===e&&(y((e=>!e)),g(!1)),R((e=>!e)),window.innerWidth<=768&&C(!1)};return N?(0,s.createElement)("div",{className:"n_3BxnPI"},(0,s.createElement)(c,{onSelectCase:e=>{r(e),t?.(e),o([]);const n=new URL(window.location.href);n.searchParams.set("case_id",e),window.history.pushState({},"",n)},selectedCaseId:n,cases:O,refreshCases:T,error:x,loading:A,sidebarOpen:v,onCloseSidebar:()=>C(!1),isHR:P}),(0,s.createElement)("div",{className:"E04Xs1YK",ref:S,onDragOver:e=>e.preventDefault(),onDragEnter:e=>{e.preventDefault(),u(!0)},onDragLeave:e=>{null!==e.relatedTarget&&S.current.contains(e.relatedTarget)||u(!1)},onDrop:e=>{e.preventDefault(),u(!1)}},(0,s.createElement)(Bt,{supportCase:w,canEditTitle:U,onToggleInfo:()=>F("info"),onToggleAttachments:()=>F("attachments"),showAttachments:f,uploading:d,onTitleUpdate:async e=>{try{await Tt.post(`/wp-json/hrsc/v1/support-cases/${n}/title`,{title:e},{headers:{"X-WP-Nonce":window.hrscChatVars?.nonce||""}}),await T(),await B(n)}catch(e){console.error("âŒ Title update failed:",e)}},onToggleSidebar:()=>C((e=>!e)),isHR:P}),(0,s.createElement)("div",{className:`${Ft} ${f?Dt:""}`},(0,s.createElement)("div",{className:Mt},(0,s.createElement)("h2",{className:Ht},(0,i.__)("Attachments","hr-support-chat")),(0,s.createElement)("button",{onClick:()=>F("attachments"),className:It,"aria-label":(0,i.__)("Close attachments","hr-support-chat")},(0,s.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 8C3 7.44772 3.44772 7 4 7H20C20.5523 7 21 7.44772 21 8C21 8.55228 20.5523 9 20 9H4C3.44772 9 3 8.55228 3 8ZM3 16C3 15.4477 3.44772 15 4 15H14C14.5523 15 15 15.4477 15 16C15 16.5523 14.5523 17 14 17H4C3.44772 17 3 16.5523 3 16Z",fill:"currentColor"})))),(0,s.createElement)(Ut,{supportCaseId:n,attachments:a,setAttachments:o})),(0,s.createElement)("div",{className:`${Ft} ${E?Dt:""}`},(0,s.createElement)("div",{className:Mt},(0,s.createElement)("h2",{className:Ht},(0,i.__)("Case Information","hr-support-chat")),(0,s.createElement)("button",{onClick:()=>F("info"),className:It,"aria-label":(0,i.__)("Close info","hr-support-chat")},(0,s.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 8C3 7.44772 3.44772 7 4 7H20C20.5523 7 21 7.44772 21 8C21 8.55228 20.5523 9 20 9H4C3.44772 9 3 8.55228 3 8ZM3 16C3 15.4477 3.44772 15 4 15H14C14.5523 15 15 15.4477 15 16C15 16.5523 14.5523 17 14 17H4C3.44772 17 3 16.5523 3 16Z",fill:"currentColor"})))),(0,s.createElement)(Pt,{supportCase:w,attachments:a})),(0,s.createElement)(jt,{caseId:n,messages:j,refreshMessages:L,loading:A,attachments:a,setAttachments:o,refreshCases:T,isHR:P}))):null},qt={container:"kwA8rxlw",card:"rbOkxELu",formCard:"hHQJ1vAr",title:"xUuH0HF4",mainDescription:"UO9SNX3u",smallDescription:"llYX6pHf",buttonGroup:"brFuPxMB",primaryButton:"QaDJMTHr",secondaryButton:"YHsalOAK",backLink:"OsoIzHE6",inputRow:"caEnK3Vb",input:"Jtz3LvEa",toggleRow:"mQNO1u3Y",warningBox:"TDklXsza",tokenRow:"FdS6bEtK",tokenField:"jXhejRBB",copyButton:"jCy26Xrv"},zt=({children:e})=>{const{session:t,updateSession:n,ready:r}=(0,s.useContext)(p),[a,o]=(0,s.useState)("mode"),[l,c]=(0,s.useState)(!1),[u,d]=(0,s.useState)({token:"",first_name:"",phone:"",email:"",updateEmail:""}),[m,f]=(0,s.useState)(""),[g,E]=(0,s.useState)(!1);(0,s.useEffect)((()=>{if("create"===a&&l){const e=Math.random().toString(36).substring(2,10);f(e),d((t=>({...t,token:e})))}}),[a,l]);const y=e=>{const{name:t,value:n}=e.target;d((e=>({...e,[t]:n})))},w=async e=>{e.preventDefault();try{if("enter"===a)u.token.trim()&&n({token:u.token.trim()});else if("create"===a){const e={anonymous:l,token:l?u.token:void 0,...l?{update_email:u.updateEmail.trim()}:{first_name:u.first_name.trim(),phone:u.phone.trim(),email:u.email.trim(),update_email:u.updateEmail.trim()}},t=await h("/support-cases","POST",e);n(l?{token:t.token}:{email:u.email.trim(),first_name:u.first_name.trim()})}}catch(e){alert((0,i.__)("Failed to create or authenticate session: ","hr-support-chat")+e.message)}};if(!r)return null;const b=t?.token,v=Array.isArray(t?.roles)&&t.roles.length>0;return b||v?e:(0,s.createElement)("div",{className:qt.container},(0,s.createElement)("h1",null,"Kunde AS"),"mode"===a&&(0,s.createElement)("div",{className:qt.card},(0,s.createElement)("h2",{className:qt.title},(0,i.__)("Snakk med HR-rÃ¥dgiver","hr-support-chat")),(0,s.createElement)("p",{className:qt.mainDescription},(0,i.__)("Ta kontakt for rÃ¥d, informasjon om lover og regler, eller gi varsel om kritikkverdige forhold. Saken blir hÃ¥ndtert av en ekstern HR-rÃ¥dgiver.","hr-support-chat")),(0,s.createElement)("p",{className:qt.smallDescription},(0,i.__)("Her kommer det mer info som kan vÃ¦re lurt Ã¥ vite, men litt mindre tekst.","hr-support-chat")),(0,s.createElement)("div",{className:qt.buttonGroup},(0,s.createElement)("button",{type:"button",onClick:()=>o("create"),className:qt.primaryButton},(0,i.__)("Snakk med rÃ¥dgiver","hr-support-chat")),(0,s.createElement)("button",{type:"button",onClick:()=>o("enter"),className:qt.secondaryButton},(0,i.__)("Vis min sak","hr-support-chat")))),"enter"===a&&(0,s.createElement)("form",{onSubmit:w,className:qt.formCard},(0,s.createElement)("button",{type:"button",className:qt.backLink,onClick:()=>o("mode")},(0,s.createElement)("svg",{stroke:"currentColor",fill:"none","stroke-width":"2",viewBox:"0 0 24 24","stroke-linecap":"round","stroke-linejoin":"round",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),(0,s.createElement)("polyline",{points:"12 19 5 12 12 5"})),(0,i.__)("Back","hr-support-chat")),(0,s.createElement)("h2",{className:qt.title},(0,i.__)("Varslerportal","hr-support-chat")),(0,s.createElement)("p",{className:qt.description},(0,i.__)("For Ã¥ se saken din, skriv inn tilgangskoden du fikk da du fÃ¸rst varslet om hendelsen.","hr-support-chat")),(0,s.createElement)("div",{className:qt.inputRow},(0,s.createElement)("label",null,(0,i.__)("Tilgangskode *","hr-support-chat")),(0,s.createElement)("input",{type:"text",name:"token",value:u.token,onChange:y,className:qt.input,required:!0})),(0,s.createElement)("button",{type:"submit",className:qt.primaryButton},(0,i.__)("Vis min sak","hr-support-chat"))),"create"===a&&(0,s.createElement)("form",{onSubmit:w,className:qt.formCard},(0,s.createElement)("button",{type:"button",className:qt.backLink,onClick:()=>o("mode")},(0,s.createElement)("svg",{stroke:"currentColor",fill:"none","stroke-width":"2",viewBox:"0 0 24 24","stroke-linecap":"round","stroke-linejoin":"round",height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),(0,s.createElement)("polyline",{points:"12 19 5 12 12 5"})),(0,i.__)("Back","hr-support-chat")),(0,s.createElement)("h2",{className:qt.title},(0,i.__)("Snakk med rÃ¥dgiver","hr-support-chat")),(0,s.createElement)("div",{className:qt.toggleRow},(0,s.createElement)("input",{type:"checkbox",checked:l,onChange:()=>c((e=>!e))})," ",(0,s.createElement)("label",null,(0,s.createElement)("span",null,(0,i.__)("Anonym","hr-support-chat")))),!l&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)("div",{className:qt.inputRow},(0,s.createElement)("label",null,(0,i.__)("Fornavn (valgfritt)","hr-support-chat")),(0,s.createElement)("input",{type:"text",name:"first_name",value:u.first_name,onChange:y,className:qt.input})),(0,s.createElement)("div",{className:qt.inputRow},(0,s.createElement)("label",null,(0,i.__)("Telefonnummer (valgfritt)","hr-support-chat")),(0,s.createElement)("input",{type:"tel",name:"phone",value:u.phone,onChange:y,className:qt.input})),(0,s.createElement)("div",{className:qt.inputRow},(0,s.createElement)("label",null,(0,i.__)("E-postadresse (valgfritt)","hr-support-chat")),(0,s.createElement)("input",{type:"email",name:"email",value:u.email,onChange:y,className:qt.input}))),(0,s.createElement)("div",{className:qt.inputRow},(0,s.createElement)("label",null,(0,i.__)("E-postadresse for oppdateringsvarsler (valgfritt)","hr-support-chat")),(0,s.createElement)("input",{type:"email",name:"updateEmail",value:u.updateEmail,onChange:y,className:qt.input})),l&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)("div",{className:qt.warningBox},(0,s.createElement)("p",null,(0,s.createElement)("strong",null,(0,i.__)("âš ï¸ Lagre tilgangskoden din","hr-support-chat"))),(0,s.createElement)("p",null,(0,i.__)("Du bruker den for Ã¥ fÃ¥ tilgang til saken din senere og se eventuelle oppdateringer. Hvis du mister den, vil du ikke kunne fÃ¥ tilgang til saken din igjen.","hr-support-chat"))),(0,s.createElement)("div",null,(0,s.createElement)("label",null,(0,i.__)("Tilgangskode *","hr-support-chat")),(0,s.createElement)("div",{className:qt.tokenRow},(0,s.createElement)("input",{type:"text",name:"token",value:m,readOnly:!0,className:qt.tokenField}),(0,s.createElement)("button",{type:"button",onClick:async()=>{await async function(e){if(navigator.clipboard&&"function"==typeof navigator.clipboard.writeText)try{return await navigator.clipboard.writeText(e),!0}catch(e){console.error("Failed to copy via Clipboard API:",e)}try{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="1px",t.style.height="1px",t.style.padding="0",t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",document.body.appendChild(t),t.select();const n=document.execCommand("copy");if(document.body.removeChild(t),!n)throw new Error("execCommand returned false");return!0}catch(e){return console.error("Fallback: Could not copy text:",e),!1}}(m)&&(E(!0),setTimeout((()=>E(!1)),2e3))},className:qt.copyButton},g?(0,i.__)("Copied","hr-support-chat"):(0,i.__)("Copy","hr-support-chat"))))),(0,s.createElement)("button",{type:"submit",className:qt.primaryButton},(0,i.__)("Send inn","hr-support-chat"))))},Vt=(0,s.createContext)(),Wt=({children:e})=>{const[t,n]=(0,s.useState)(null);return(0,s.createElement)(Vt.Provider,{value:{toast:t,showToast:e=>{n(e),setTimeout((()=>n(null)),3e3)}}},e,t&&(0,s.createElement)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black text-white text-sm px-4 py-2 rounded shadow z-50"},t))},Jt=()=>{const[e,t]=(0,s.useState)(null);return(0,s.createElement)(m,null,(0,s.createElement)(Wt,null,(0,s.createElement)(zt,null,(0,s.createElement)($t,{selectedCaseId:e,onSelectCase:t}))))};document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("hr-support-chat-app");e&&(0,a.H)(e).render((0,s.createElement)(Jt,null))}))})();